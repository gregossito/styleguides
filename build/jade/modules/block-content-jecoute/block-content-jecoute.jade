include ../../modules/block-content/block-content
include ../../modules/button/button

mixin block-content-jecoute(opts)
  - modifiers = opts.modifiers || []
  - modifiers.push("block-content-jecoute")
  +block-content({"title": opts.title, "modifiers": modifiers})
    if opts.items
      div.block-content-items
        each item in opts.items
          div.block-content-item
            div.block-content-timer
              span.start= item.question.time
              span.end= item.answer.time
              div.block-content-bar
                div.progress
            div.block-content-question-answer
              div.block-content-question
                div.user= item.question.user
                div.text= item.question.text
              div.block-content-answer
                div.user= item.answer.user
                div.text= item.answer.text
    if opts.text
      .block-content-text= opts.text
    - button = JSON.parse(JSON.stringify(opts.button)) // clone the data object
    - button.modifiers = ["action"] // overwrite the modifiers
    +button(button)
