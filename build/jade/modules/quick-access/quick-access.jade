include ../button/button
include ../notice/notice
include ../search-field/search-field

mixin quick-access(opts)
  .quick-access(class=opts.modifiers style=opts.background.image ? "background-image: url(#{opts.background.image});" : "")
    if opts.background.video
      video.quick-access-video(autoplay=true, loop=true, muted='muted', poster=opts.background.image)
        each source in opts.background.video.sources
          source&attributes(source)
    .quick-access-wrapper
      .quick-access-search
        +search-field(opts.search)
      if opts.items
        ul.quick-access-buttons
          each item in opts.items
            li
              - button = JSON.parse(JSON.stringify(item)) // clone the data object
              - button.modifiers = ["secondary"] // overwrite the modifiers
              +button(button)
      .quick-access-results
        ul
        - button = JSON.parse(JSON.stringify(opts.results.button)) // clone the data object
        - button.modifiers = ["action", "tertiary", "quick-access-results-more"] // overwrite the modifiers
        +button(button)
    .quick-access-close-search: i.icon-close
    if opts.notice
      +notice(opts.notice)
